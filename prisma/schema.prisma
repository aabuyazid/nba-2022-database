// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model team {
  id                  Int           @id @default(autoincrement())
  players             player[]      // One Team - Many Players
  competed_home       game[]        @relation(name: "competed_home")
  competed_visitor    game[]        @relation(name: "competed_visitor")
  name                String        @db.VarChar(255)
  city                String        @db.VarChar(255)
  logo                String?   
}

model player {
  id                  Int           @id @default(autoincrement())
  plays_for           team          @relation(fields: [team_id], references: [id])
  team_id             Int
  name                String        @db.VarChar(255)
  birth_date          DateTime?
  birth_country       String?       @db.VarChar(255)
  height              String?       @db.VarChar(255)
  weight              String?       @db.VarChar(255)
  single_player_perms performance[] // One Player - Many Stats
}

model game {
  id                  Int           @id @default(autoincrement())
  home_team           team          @relation(name: "competed_home", fields: [home_team_id], references: [id])
  home_team_id        Int   
  visitor_team        team          @relation(name: "competed_visitor", fields: [visitor_team_id], references: [id])
  visitor_team_id     Int   
  diff_player_perms   performance[] // One Game - Many Player Stats
  date                DateTime
  home_points         Int
  visitor_points      Int
  times_tied          Int?
  lead_changes        Int?
}

model performance {
  id                  Int           @id @default(autoincrement())
  is_performed_by     player        @relation(fields: [player_id], references: [id])
  performed_at        game          @relation(fields: [game_id], references: [id])
  player_id           Int
  game_id             Int
  min                 Int?        
  fga                 Int?
  fgm                 Int?
  fgp                 Float?        
  fta                 Int?
  ftm                 Int?
  ftp                 Float?        
  tpa                 Int?
  tpm                 Int?
  tpp                 Float?        
  off_reb             Int?
  def_reb             Int?
  tot_reb             Int?
  steals              Int?
  assists             Int?
  turnovers           Int?
  blocks              Int?
  plus_minus          Int?
  comment             String?
}