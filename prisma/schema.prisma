// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model Team {
  id                  Int           @id @default(autoincrement())
  name                String        @db.VarChar(255)
  city                String        @db.VarChar(255)
  logo                String?   
  players             Player[]      // One Team - Many Players
  homeGames           GameStats[]   @relation(name: "homeGames")
  awayGames           GameStats[]   @relation(name: "awayGames")
}

model Player {
  id                  Int           @id @default(autoincrement())
  name                String        @db.VarChar(255)
  birthDate           DateTime?
  birthCountry        String?       @db.VarChar(255)
  height              String?       @db.VarChar(255)
  weight              String?       @db.VarChar(255)
  singlePlayerStats   PlayerStats[] // One Player - Many Stats
  team                Team          @relation(fields: [teamId], references: [id])
  teamId              Int
}

model GameStats {
  id                  Int           @id @default(autoincrement())
  date                DateTime
  homePoints          Int
  visitorPoints       Int
  timesTied           Int?
  leadChanges         Int?
  diffPlayerStats     PlayerStats[] // One Game - Many Player Stats
  homeTeam            Team          @relation(name: "homeGames", fields: [homeTeamId], references: [id])
  homeTeamId          Int   
  visitorTeam         Team          @relation(name: "awayGames", fields: [visitorTeamId], references: [id])
  visitorTeamId       Int   
}

model PlayerStats {
  id                  Int           @id @default(autoincrement())
  min                 String?        
  fga                 Int?
  fgm                 Int?
  fgp                 String?        
  fta                 Int?
  ftm                 Int?
  ftp                 String?        
  tpa                 Int?
  tpm                 Int?
  tpp                 String?        
  offReb              Int?
  defReb              Int?
  totReb              Int?
  steals              Int?
  assists             Int?
  turnovers           Int?
  blocks              Int?
  plusMinus           String?
  comment             String?
  player              Player        @relation(fields: [playerId], references: [id])
  gameStats           GameStats?    @relation(fields: [gameId], references: [id])
  playerId            Int
  gameId              Int
}